{"remainingRequest":"/Users/lengziyu/Documents/wb/wb-recharge/node_modules/babel-loader/lib/index.js!/Users/lengziyu/Documents/wb/wb-recharge/src/utils/request.js","dependencies":[{"path":"/Users/lengziyu/Documents/wb/wb-recharge/src/utils/request.js","mtime":1603087511114},{"path":"/Users/lengziyu/Documents/wb/wb-recharge/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lengziyu/Documents/wb/wb-recharge/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0ICR2YXJpYWJsZXMgZnJvbSAnLi92YXJpYWJsZXMnOwppbXBvcnQgcXMgZnJvbSAncXMnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwp2YXIgdm0gPSBuZXcgVnVlKCk7IC8vIGNyZWF0ZSBhbiBheGlvcyBpbnN0YW5jZQoKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHZtLiR2YXJpYWJsZXMucmVxdWVzdFVybCwKICAvLyBhcGkg55qEIGJhc2VfdXJsCiAgdGltZW91dDogMTAwMDAKfSk7IC8vIOiuvue9ruivt+axguWktAoKYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCc7IC8vIOaLpuaIquivt+axguWktAoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGNvbnNvbGUubG9nKGNvbmZpZyk7CiAgY29uZmlnLmhlYWRlcnNbJ3Rva2VuJ10gPSB2bS4kdXRpbHMuZ2V0U3RvcmFnZSgnVG9rZW4nKTsKCiAgaWYgKGNvbmZpZy5tZXRob2QgPT0gJ1BPU1QnKSB7CiAgICBjb25maWcuZGF0YSA9IHFzLnN0cmluZ2lmeShjb25maWcuZGF0YSk7CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOyAvLyDmi6bmiKrlrp7kvZMKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKCiAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gJzUwMCcpIHt9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gJzEwMDQnKSB7CiAgICB2bS4kdXRpbHMucmVtb3ZlU3RvcmFnZSgnQ0FJLUFkbWluLVRva2VuJyk7CiAgICB2bS4kdXRpbHMucm91dGVUbygnL2xvZ2luP3JlZGlyZWN0PScgKyByb3V0ZXIuaGlzdG9yeS5jdXJyZW50LmZ1bGxQYXRoKTsKICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSAhPT0gJzIwMCcpIHt9CgogIHJldHVybiByZXNwb25zZS5kYXRhOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["/Users/lengziyu/Documents/wb/wb-recharge/src/utils/request.js"],"names":["axios","$variables","qs","Vue","router","vm","service","create","baseURL","requestUrl","timeout","defaults","headers","post","interceptors","request","use","config","console","log","$utils","getStorage","method","data","stringify","error","Promise","reject","response","code","removeStorage","routeTo","history","current","fullPath"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,aAAvB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,IAAIC,EAAE,GAAG,IAAIF,GAAJ,EAAT,C,CAEA;;AACA,IAAMG,OAAO,GAAGN,KAAK,CAACO,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEH,EAAE,CAACJ,UAAH,CAAcQ,UADI;AACQ;AACnCC,EAAAA,OAAO,EAAE;AAFkB,CAAb,CAAhB,C,CAKA;;AACAV,KAAK,CAACW,QAAN,CAAeC,OAAf,CAAuBC,IAAvB,CAA4B,cAA5B,IAA8C,iDAA9C,C,CAGA;;AACAP,OAAO,CAACQ,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAAAC,MAAM,EAAI;AACRC,EAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACHA,EAAAA,MAAM,CAACL,OAAP,CAAe,OAAf,IAA0BP,EAAE,CAACe,MAAH,CAAUC,UAAV,CAAqB,OAArB,CAA1B;;AACG,MAAGJ,MAAM,CAACK,MAAP,IAAiB,MAApB,EAA2B;AACzBL,IAAAA,MAAM,CAACM,IAAP,GAAcrB,EAAE,CAACsB,SAAH,CAAaP,MAAM,CAACM,IAApB,CAAd;AACD;;AACD,SAAON,MAAP;AACD,CARH,EASE,UAAAQ,KAAK,EAAI;AACPC,EAAAA,OAAO,CAACC,MAAR,CAAeF,KAAf;AACD,CAXH,E,CAaA;;AACAnB,OAAO,CAACQ,YAAR,CAAqBc,QAArB,CAA8BZ,GAA9B,CACE,UAAAY,QAAQ,EAAI;AACbV,EAAAA,OAAO,CAACC,GAAR,CAAYS,QAAQ,CAACL,IAArB;;AAEA,MAAGK,QAAQ,CAACL,IAAT,CAAcM,IAAd,KAAuB,KAA1B,EAAgC,CAE/B,CAFD,MAEM,IAAGD,QAAQ,CAACL,IAAT,CAAcM,IAAd,KAAuB,MAA1B,EAAkC;AACvCxB,IAAAA,EAAE,CAACe,MAAH,CAAUU,aAAV,CAAwB,iBAAxB;AACAzB,IAAAA,EAAE,CAACe,MAAH,CAAUW,OAAV,CAAkB,qBAAmB3B,MAAM,CAAC4B,OAAP,CAAeC,OAAf,CAAuBC,QAA5D;AACA,GAHK,MAGA,IAAGN,QAAQ,CAACL,IAAT,CAAcM,IAAd,KAAuB,KAA1B,EAAgC,CAErC;;AAED,SAAOD,QAAQ,CAACL,IAAhB;AAEE,CAfH,EAgBE,UAAAE,KAAK,EAAI;AACP,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAlBH;AAqBA,eAAenB,OAAf","sourcesContent":["import axios from 'axios'\nimport $variables from './variables'\nimport qs from 'qs'\nimport Vue from 'vue'\nimport router from '@/router';\n\nlet vm = new Vue();\n\n// create an axios instance\nconst service = axios.create({\n  baseURL: vm.$variables.requestUrl, // api 的 base_url\n  timeout: 10000,\n})\n\n// 设置请求头\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded;charset=utf-8';\n\n\n// 拦截请求头\nservice.interceptors.request.use(\n  config => {\n    console.log(config)\n\tconfig.headers['token'] = vm.$utils.getStorage('Token');\n    if(config.method == 'POST'){\n\t\t    config.data = qs.stringify(config.data)\n    }\n    return config\n  },\n  error => {\n    Promise.reject(error)\n  }\n)\n// 拦截实体\nservice.interceptors.response.use(\n  response => {\n\tconsole.log(response.data)\n\t\n\tif(response.data.code === '500'){\n\n\t}else if(response.data.code === '1004') {\n\t\tvm.$utils.removeStorage('CAI-Admin-Token');\n\t\tvm.$utils.routeTo('/login?redirect='+router.history.current.fullPath);\n\t}else if(response.data.code !== '200'){\n\t\t\n\t}\n\t\n\treturn response.data;\n\n  },\n  error => {\n    return Promise.reject(error)\n  }\n)\n\nexport default service\n"]}]}