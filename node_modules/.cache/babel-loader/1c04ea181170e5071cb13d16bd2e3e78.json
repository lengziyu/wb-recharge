{"remainingRequest":"/Users/lengziyu/Documents/wb/wb-recharge/node_modules/babel-loader/lib/index.js!/Users/lengziyu/Documents/wb/wb-recharge/src/utils/request.js","dependencies":[{"path":"/Users/lengziyu/Documents/wb/wb-recharge/src/utils/request.js","mtime":1603076007647},{"path":"/Users/lengziyu/Documents/wb/wb-recharge/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lengziyu/Documents/wb/wb-recharge/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0ICR2YXJpYWJsZXMgZnJvbSAnLi92YXJpYWJsZXMnOwppbXBvcnQgcXMgZnJvbSAncXMnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwp2YXIgdm0gPSBuZXcgVnVlKCk7IC8vIGNyZWF0ZSBhbiBheGlvcyBpbnN0YW5jZQoKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHZtLiR2YXJpYWJsZXMucmVxdWVzdFVybCwKICAvLyBhcGkg55qEIGJhc2VfdXJsCiAgdGltZW91dDogMTAwMDAKfSk7CmNvbnNvbGUubG9nKHZtKTsgLy8g6K6+572u6K+35rGC5aS0CgpheGlvcy5kZWZhdWx0cy5oZWFkZXJzLnBvc3RbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04JzsgLy8g5oum5oiq6K+35rGC5aS0CgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgY29uc29sZS5sb2coY29uZmlnKTsKICBjb25maWcuaGVhZGVyc1sndG9rZW4nXSA9IHZtLiR1dGlscy5nZXRTdG9yYWdlKCdUb2tlbicpOwoKICBpZiAoY29uZmlnLm1ldGhvZCA9PSAnUE9TVCcpIHsKICAgIGNvbmZpZy5kYXRhID0gcXMuc3RyaW5naWZ5KGNvbmZpZy5kYXRhKTsKICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIOaLpuaIquWunuS9kwoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwoKICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSAnNTAwJykge30gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSAnMTAwNCcpIHsKICAgIHZtLiR1dGlscy5yZW1vdmVTdG9yYWdlKCdDQUktQWRtaW4tVG9rZW4nKTsKICAgIHZtLiR1dGlscy5yb3V0ZVRvKCcvbG9naW4/cmVkaXJlY3Q9JyArIHJvdXRlci5oaXN0b3J5LmN1cnJlbnQuZnVsbFBhdGgpOwogIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5jb2RlICE9PSAnMjAwJykge30KCiAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCBzZXJ2aWNlOw=="},{"version":3,"sources":["/Users/lengziyu/Documents/wb/wb-recharge/src/utils/request.js"],"names":["axios","$variables","qs","Vue","router","vm","service","create","baseURL","requestUrl","timeout","console","log","defaults","headers","post","interceptors","request","use","config","$utils","getStorage","method","data","stringify","error","Promise","reject","response","code","removeStorage","routeTo","history","current","fullPath"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,aAAvB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,IAAIC,EAAE,GAAG,IAAIF,GAAJ,EAAT,C,CAEA;;AACA,IAAMG,OAAO,GAAGN,KAAK,CAACO,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEH,EAAE,CAACJ,UAAH,CAAcQ,UADI;AACQ;AACnCC,EAAAA,OAAO,EAAE;AAFkB,CAAb,CAAhB;AAIAC,OAAO,CAACC,GAAR,CAAYP,EAAZ,E,CACA;;AACAL,KAAK,CAACa,QAAN,CAAeC,OAAf,CAAuBC,IAAvB,CAA4B,cAA5B,IAA8C,iDAA9C,C,CAGA;;AACAT,OAAO,CAACU,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAAAC,MAAM,EAAI;AACRR,EAAAA,OAAO,CAACC,GAAR,CAAYO,MAAZ;AACHA,EAAAA,MAAM,CAACL,OAAP,CAAe,OAAf,IAA0BT,EAAE,CAACe,MAAH,CAAUC,UAAV,CAAqB,OAArB,CAA1B;;AACG,MAAGF,MAAM,CAACG,MAAP,IAAiB,MAApB,EAA2B;AACzBH,IAAAA,MAAM,CAACI,IAAP,GAAcrB,EAAE,CAACsB,SAAH,CAAaL,MAAM,CAACI,IAApB,CAAd;AACD;;AACD,SAAOJ,MAAP;AACD,CARH,EASE,UAAAM,KAAK,EAAI;AACPC,EAAAA,OAAO,CAACC,MAAR,CAAeF,KAAf;AACD,CAXH,E,CAaA;;AACAnB,OAAO,CAACU,YAAR,CAAqBY,QAArB,CAA8BV,GAA9B,CACE,UAAAU,QAAQ,EAAI;AACbjB,EAAAA,OAAO,CAACC,GAAR,CAAYgB,QAAQ,CAACL,IAArB;;AAEA,MAAGK,QAAQ,CAACL,IAAT,CAAcM,IAAd,KAAuB,KAA1B,EAAgC,CAE/B,CAFD,MAEM,IAAGD,QAAQ,CAACL,IAAT,CAAcM,IAAd,KAAuB,MAA1B,EAAkC;AACvCxB,IAAAA,EAAE,CAACe,MAAH,CAAUU,aAAV,CAAwB,iBAAxB;AACAzB,IAAAA,EAAE,CAACe,MAAH,CAAUW,OAAV,CAAkB,qBAAmB3B,MAAM,CAAC4B,OAAP,CAAeC,OAAf,CAAuBC,QAA5D;AACA,GAHK,MAGA,IAAGN,QAAQ,CAACL,IAAT,CAAcM,IAAd,KAAuB,KAA1B,EAAgC,CAErC;;AAED,SAAOD,QAAQ,CAACL,IAAhB;AAEE,CAfH,EAgBE,UAAAE,KAAK,EAAI;AACP,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAlBH;AAqBA,eAAenB,OAAf","sourcesContent":["import axios from 'axios'\nimport $variables from './variables'\nimport qs from 'qs'\nimport Vue from 'vue'\nimport router from '@/router';\n\nlet vm = new Vue();\n\n// create an axios instance\nconst service = axios.create({\n  baseURL: vm.$variables.requestUrl, // api 的 base_url\n  timeout: 10000,\n})\nconsole.log(vm)\n// 设置请求头\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded;charset=utf-8';\n\n\n// 拦截请求头\nservice.interceptors.request.use(\n  config => {\n    console.log(config)\n\tconfig.headers['token'] = vm.$utils.getStorage('Token');\n    if(config.method == 'POST'){\n\t\t    config.data = qs.stringify(config.data)\n    }\n    return config\n  },\n  error => {\n    Promise.reject(error)\n  }\n)\n// 拦截实体\nservice.interceptors.response.use(\n  response => {\n\tconsole.log(response.data)\n\t\n\tif(response.data.code === '500'){\n\n\t}else if(response.data.code === '1004') {\n\t\tvm.$utils.removeStorage('CAI-Admin-Token');\n\t\tvm.$utils.routeTo('/login?redirect='+router.history.current.fullPath);\n\t}else if(response.data.code !== '200'){\n\t\t\n\t}\n\t\n\treturn response.data;\n\n  },\n  error => {\n    return Promise.reject(error)\n  }\n)\n\nexport default service\n"]}]}